# #1 배치 어플리케이션과 Spring Batch

회사에서 프로덕트 제작중, 기획에 매 월마다 회원의 수업정보를 데이터 정보화 하여 pushMessage를 보내줘야 한다고 해서, 찾아보다가 매달 모든 회원의 데이터 정보를 가공하여 어떤 기능을 수행해줘야 한다면 Spring MVC 를 통해서 수행한다면 깜빡하고 보내지 않는 회원이 있을수 있고 데이터를 두번 보내지는 회원이 있을수 있을것이다. 그렇기 때문에 이런 단발성으로 대용량 데이터를 처리하는 어플리케이션을 찾다가 `Spring Batch`라는 배치 어플리케이션을 알게되었고 공부를 하게 되었다.



## 1.배치 애플리케이션이란?

배치(Batch)란 일관처리 라는 뜻을 가지고 있다. 

예를 들어 매일 집계 과정을 수행해야할때 웹 어플리케이션만 알고있다면 Tomcat + Spring Mvc를 떠올릴것이다. 하지만 많은 데이터를 읽고, 가공하고, 저장한다면 해당 서버는 그만큼 많은 CPI, I/O등의 자원을 모두 사용하게 되어 다른 Request처리를 하지 못할것이다.

그렇기 때문에 이런 단발성으로 대용량의 데이터를 처리하는 어플리케이션을 배치 어플리케이션이라고 한다.

그리고 Spring Batch를 이용함으로써 Spring MVC는 비즈니스 로직에 집중을 할수 있게 된다.



#### 배치 어플리케이션의 조건

- 대용량 데이터 - 배치 어플리케이션은 대량의 데이터를 가져오고나, 전달하거나, 계산하는 등의 처리를 할 수 있어야한다.
- 자동화 - 배치 어플리케이션은 심각한 문제 해결을 제외하고는 **사용자 개입 없이 실행**되어야 한다.
- 견고성 - 배치 어플리케이션은 잘못된 데이터를 충돌/중단 없이 처리할 수 있어야 한다.
- 신뢰성 - 배치 어플리케이션은 무엇이 잘못되었는지를 추적할 수 있어야한다.(로깅, 알림)
- 성능 - 배치 어플리케이션은 **지정한 시간 안에 처리를 완료**하거나 **동시에 실행되는 다른 어플리케이션을 방해하지 않도록 수행**되어야한다.



## 1-1. Spring Batch란?

Spring의 특성(**DI, AOP, 서비스 추상화**)을 그대로 사용할수 있는 배치 어플리케이션

![image](https://user-images.githubusercontent.com/57162257/136752634-311c17e4-2d38-45cf-87bf-0dceb73e5be9.png)

## 1-2. Batch vs Quartz?

Quartz : 스케줄러의 역할, Batch와 같이 대용량 데이터 배치 처리에 대한 기능을 지원하지 않는다.

Batch : 대용량 데이터 처리, 하지만 Quartz 의 다양한 스케줄 기능을 지원하지 않는다.

그래서 나중에 매달 회원의 수업 정보를 가공해서 푸시메시지로 날려줄때 함께 사용해주면 될것같다는 생각이다.

보통 Quartz + Batch를 함께 사용한다고한다.

`정해진 스케줄마다 Quartz가 Spring Batch를 실행하는 구조`

## 1-4. 마무리

현업에서도 정해진 시간에 따라 데이터 가공이 필요한 경우 Spring Batch가 사용된다고한다.

열심히 공부해서 회사 프로덕트에 적용시킬수 있도록 해보자 :)



# 참고

https://jojoldu.tistory.com/324?category=902551