# 1.라이브러리 의존관계

gradle이나 maven같은 빌드 툴들은 의존관계를 관리해줌.
ex) spring-boot-starter-web라이브러리를 가져오면 서로 필요한 라이브러리를 함꼐 땡겨서 가져온다.

- Gradle - Dependencies
  - complieClasspath에 있는 주요 라이브러리와 관련된 라이브러리를 확인해보면 되게 많은 라이브러리들이 있는데 그런것들을 주요 라이브러리를 선택하면 그것과 관련있는 라이브러리를 maven 툴들이 함께 가져오게한것
- 주요 라이브러리
  - spring-boot-starter-web
    - spring-boot-starter-tomcat : 톰캣
    - spring-webmvc : 스프링 웹 mvc
  - spring-boot-starter-thymeleaf : 타임리프 템플릿 엔진(view)
  - spring-boot-starter(공통) : 스프링 부트 + 스프링 코어 + 로깅
    - spring-boot
      - spring-core
    - spring-boot-starter-loggin
      - logback, slf4j
  - spring-boot-starter-test: 테스트 라이브러리
    - junit : 테스트 프레임워크
    - mockito : 목 라이브러리
    - assertj : 테스트 코드를 편리하게 작성하게 도와주는 라이브러리
    - spring-test : 스프링 통합 테스트 지원



# 2.View환경설정

## (1) view 반환

```java
@Controller
public class HelloController{
    @GetMapping("hello") 
    public String hello(Model model){
        model.addAttribute("data","hello!!");
        return "hello";
    }
}
```

```html
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Hello</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<p th:text="'안녕하세요. ' + ${data}" >안녕하세요. 손님</p>
</body>
</html>
```

url로 `/hello` 경로로 요청을 보내게도면 `templates`의 `hello.html`이 출력된다.

**``controller``**

- `GetMapping` : url 메소드
- `model.addAttribute` : html파일에 보낼 속성 명과 속성값
  model.addAttrubte([속성명],[속성값])
- `return` : 반환하는 값이 html파일명인 것을 반환.

**``hello.html``**

- data : 속성값이 data인 값을 controller에서 받아와서 출력

## (2) 동작 환경

![image](https://user-images.githubusercontent.com/57162257/116716840-2eba6480-aa13-11eb-9b44-19163bf38827.png)

- 컨트롤러에서 리턴 값으로 문자를 반환하면 viewResolver가 화면을 찾아서 처리한다.
  - SpringBoot 템플릿엔진 기본 viewName매핑
  - `resources: templates/` + {viewName} + `.html`

# 3.Build하기(linux)

1. 프로젝트 루트 디렉터리 이동
2. gradlew디렉터리 확인후 ./gradlew build
3. cd build/libs
4. java -jar {프로젝트이름}-0.0.1-SNAPSHOT.jar
5. 실행 확인

ec2와 같은 서버에 빌드된 파일을 배포하고 java -jar 명령어로 빌드파일을 실행만해주면 된다.

그 이유는 ``빌드된 JAR파일안에 내장된 웹서버(기본은 톰캣)를 내포하고있고, 실제 JAR파일을 실행하면 내장된 웹서버가 동작된다.``

``또한 SpringBoot로 프로젝트를 생성하면 spring-boot-starter-web패키지 의존성이 있는데 해당 패키지는 spring-boot-starter-tomcat패키지를 내포한다. 그렇기에 따로 복잡한 설정을 해주지 않아도 서버를 편리하게 배포해줄수 있게 된다.``

만약 빌드가 실패한다면 루트 디렉터리로 이동한후 ``./gradlew clean build`` 명령어를 수행해주면 build파일의 빌드 파일을 삭제후 다시 빌드한다.